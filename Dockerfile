# ------------------------------------------------------------------
# BUMPくんの家の設計図 (Dockerfile)
# ------------------------------------------------------------------

# STEP 1: 家の土台と骨組みを選ぶ
# Pythonバージョン3.11が使える、スリムで頑丈な土台(OS)を使います。
FROM python:3.13-slim@sha256:6f79e7a10bb7d0b0a50534a70ebc78823f941fba26143ecd7e6c5dca9d7d7e8a

# STEP 2: 家の中で作業する場所を決める
# 「/app」という名前の作業部屋を作って、これからはそこで作業します。
WORKDIR /app

# STEP 3: 必要な道具リストを先に家に運び込む
# まず、ボットを動かすのに必要な部品リスト(requirements.txt)だけをコピーします。
# こうすると、家のリフォームが速くなる魔法がかかります。
COPY requirements.txt .

# STEP 4: 道具リストを見て、全部の道具を設置する
# 部品リストを見ながら、pipコマンドで必要な道具を全部インストールします。
RUN pip install --no-cache-dir -r requirements.txt

# STEP 5: 残りの家財道具を全部運び込む
# 最後に、ボットのプログラム本体(main.pyやdatabase.pyなど)を全部コピーします。
COPY . .

# STEP 6: 家の電源を入れる方法を決める
# この家の電源スイッチは「python main.py」だよ、と教えてあげます。
# これでコンテナが起動したときに、自動でボットが動き出します。
CMD ["python", "main.py"]